#!/usr/bin/python3


# -*- coding: utf-8 -*-
import re
import sys
from os import path


from invoke.main import program

FILE = path.abspath(__file__)
BIN_PATH = path.dirname(FILE)
SCRIPT_PATH = path.abspath(path.join(BIN_PATH, ".."))
FABFILE_PATH = path.join(SCRIPT_PATH, "tasks")

sys.path.append(SCRIPT_PATH)


if __name__ == '__main__':
    sys.argv[0] = re.sub(r'(-script\.pyw?|\.exe)?$', '', sys.argv[0])

    # cludge but at least ir preserves the path
    sys.argv.insert(1, "-r")
    sys.argv.insert(2, SCRIPT_PATH)

    sys.exit(program.run())
